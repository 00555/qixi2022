<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

		<link rel="shortcut icon" href="favicon.ico">
		<link rel="stylesheet" href="style.css">
		<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>
		<style>
			.imgss1{
				display:none
			}
			.imgss{
				position: absolute;
				bottom: 10px;
				left:10px;
				width: 200px;
			}
			.imgbu{
				position: absolute;
				bottom: 10px;
				left:10px;
				width: 80px;
				height: 80px;
				color: white;
    background: #ff69ed;
			}
			.imgss :hover{
				display:none
			}
			.page {
              width: 100%;
              font-weight: bold;
              color: #666;
              height: 100vh;
              background-image: url("xin.png");
          }
          .lastday{
              color: #red;
          }
          .important{
              color: red;
              font-weight: bolder;
          }
          .page h3{
              font-style: normal;
              color: #ff69ed;
          }

          .link{
              text-decoration: underline;
          }

          .title{
              cursor: pointer;
              color: #64CEAA;
          }
          .event_year { width:100px;border-bottom:0px solid #DDD;text-align:center;float:left;margin-left:-2%;}
          .event_list { width:850px;float:right;background: 139px 0 repeat-y;margin-left:5px; }
          .event_year li { height:40px;line-height:40px;margin-bottom:1px;font-size:18px;color: #61a0a8;cursor:pointer;}
          .event_year li.current { background:#ff69ed  1px 0 no-repeat;color:white;}
          .event_year li:hover   { background:#ff69ed  1px 0 no-repeat;color:white;}

      </style>
		<title>爱的记录 贰零贰贰七夕</title>
	</head>
	<body style="height: 100%; margin: 0">
		<button class = "imgbu" id="imgbu" onclick="imssu()">分享</button>
		<img class = "imgss1" id="imgss"  src="ma.png">

		<!-- 正文 -->
		<div class="page">
			<div class="box">
				<center id="infoc" style="font-size: 20px;  "> </center>
				<div id="container" style="height: 500px"></div>
				<ul class="event_year">
					<li class="">
						<label for="2017">2017</label>
					</li>
					<li class="">
						<label for="2018">2018</label>
					</li>
					<li class="">
						<label for="2019">2019</label>
					</li>
					<li class="">
						<label for="2020">2020</label>
					</li>
					<li>
						<label for="2021">2021</label>
					</li>
					<li >
						<label for="2022">2022</label>
					</li>
					<li>
						<label for="2023">2023</label>
					</li>
					<li class="current">
						<label for="2024">2024</label>
					</li>
				</ul>
				<ul class="event_list" id="allul">
				</ul>
				<div class="clearfix"></div>
			</div>
			</br>
			<center>Design By H Love J . 20220804 贰零贰贰七夕 </center>
			<center>记录 陪伴 Forever </center>

		</div>

		<script src="./jquery-3.4.1.min.js" type="text/javascript"></script>
    <script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>
    <script>
      L2Dwidget.init({ "model": { jsonPath:
                          "https://unpkg.com/live2d-widget-model-tororo@1.0.5/assets/tororo.model.json",
                        "scale": 1 }, "display": { "position": "right", "width": 230, "height": 300,
                        "hOffset": 0, "vOffset": -20 }, "mobile": { "show": true, "scale": 0.5 },
                      "react": { "opacityDefault": 0.8, "opacityOnHover": 0.1 } });
    </script>
		<script type="text/javascript">
			function imssu(){
				$('#imgss').removeClass('imgss1');
				$('#imgss').addClass('imgss');
			}
			$(function () {
			              $('label').click(function () {
			                  $('.event_year>li').removeClass('current');
			                  $(this).parent('li').addClass('current');
			                  var year = $(this).attr('for');
			                  $('#' + year).parent().prevAll('div').slideUp(800);
			                  $('#' + year).parent().slideDown(800).nextAll('div').slideDown(800);
			              });
			          });
			          var alldata=
			          [
			            {year:'2017',data:[
			              {num:'1. ',day:'2017-03-15',val:'00',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'2. ',day:'2017-05-04',val:'50',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'3. ',day:'2017-07-03',val:'60',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️ 不舒服 去医院检查 检查正常'},
			              {num:'4. ',day:'2017-09-05',val:'64',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'5. ',day:'2017-10-15',val:'40',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'6. ',day:'2017-11-28',val:'44',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			            ]},
			            {year:'2018',data:[
			              {num:'1. ',day:'2018-01-13',val:'46',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'2. ',day:'2018-03-11',val:'57',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'3. ',day:'2018-04-17',val:'37',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'4. ',day:'2018-05-19',val:'32',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'5. ',day:'2018-07-01',val:'43',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'6. ',day:'2018-08-04',val:'34',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'7. ',day:'2018-10-03',val:'60',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'8. ',day:'2018-12-02',val:'60',note:'流量:⭐️⭐️   痛感:⭐️⭐️'}
			            ]},
			            {year:'2019',data:[
			              {num:'1. ',day:'2019-01-09',val:'38',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'2. ',day:'2019-02-21',val:'43',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'3. ',day:'2019-04-13',val:'51',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'4. ',day:'2019-06-24',val:'72',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  盆肛炎 2019-06-25 HPV LCT检查均正常 抽血验血正常'},
			              {num:'5. ',day:'2019-08-02',val:'39',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'6. ',day:'2019-09-13',val:'42',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'7. ',day:'2019-11-06',val:'54',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'8. ',day:'2019-12-21',val:'45',note:'流量:⭐️⭐️   痛感:⭐️⭐️'}
			            ]},

			            {year:'2020',data:[
			              {num:'1. ',day:'2020-02-01',val:'42',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'2. ',day:'2020-03-20',val:'48',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'3. ',day:'2020-04-20',val:'31',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'4. ',day:'2020-06-01',val:'42',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  2020-07-07 检测 HPV LCT检查均正常 盆腔积液'},
			              {num:'5. ',day:'2020-07-14',val:'43',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  2020-07-14 验血正常 2020-8-8 专家门诊 开药'},
			              {num:'6. ',day:'2020-08-25',val:'42',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'7. ',day:'2020-10-03',val:'39',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  很痛'},
			              {num:'8. ',day:'2020-11-12',val:'40',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  很痛 痛了一晚上，看中医 11-16结束'},
			              {num:'9. ',day:'2020-12-17',val:'35',note:'流量:⭐️⭐️   痛感:⭐️⭐️'}
			            ]},
			            {year:'2021',data:[
			              {num:'1. ',day:'2021-01-23',val:'37',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'2. ',day:'2021-03-22',val:'58',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  晚  2021-03-22 检查 03-23 B超正常'},
			              {num:'3. ',day:'2021-04-16',val:'25',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'4. ',day:'2021-06-06',val:'51',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  晚上非常痛，痛到3 4 点 买了止痛药'},
			              {num:'5. ',day:'2021-07-17',val:'41',note:'流量:⭐️⭐️   痛感:⭐️⭐️'},
			              {num:'6. ',day:'2021-08-23',val:'37',note:'流量:⭐️⭐️   痛感:⭐️⭐️   14点'},
			              {num:'7. ',day:'2021-10-02',val:'40',note:'流量:⭐️⭐️  痛感:⭐️⭐️    凌晨来的 睡了一觉来的'},
			              {num:'8. ',day:'2021-11-09',val:'38',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  14点 11-11 特别痛(第二天)'},
			              {num:'9. ',day:'2021-12-18',val:'39',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  23点 第二天下午3点特别痛'}
			            ]},
			            {year:'2022',data:[
			              {num:'1. ',day:'2022-02-04',val:'48',note:'流量:⭐️⭐️   痛感:⭐️⭐️   22点'},
			              {num:'2. ',day:'2022-03-18',val:'42',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  14点半 跑了会步来的 17点开始剧烈运动直播，19点开始很痛 痛到21点'},
			              {num:'3. ',day:'2022-04-29',val:'42',note:'流量:⭐️⭐️   痛感:⭐️⭐️   12点半'},
			              {num:'4. ',day:'2022-06-18',val:'50',note:'流量:⭐️⭐️   痛感:⭐️⭐️   15点半 做了运动来的'},
			              {num:'5. ',day:'2022-08-01',val:'44',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  12点半 吃完午饭来的,当天下午很痛,凌晨3 4点也痛'},
										{num:'6. ',day:'2022-09-18',val:'48',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  17点半 第二天运动完流量多、痛'},
										{num:'7. ',day:'2022-11-02',val:'45',note:'流量:⭐️    痛感:⭐️      11点半 量很少 也不痛 '},
										{num:'8. ',day:'2022-11-29',val:'27',note:'流量:⭐️⭐️⭐️ 痛感:⭐️⭐️⭐️  11点半 第一天晚上超级痛，大降温，【因为遗失东西还去了躺派出所，第一次坐警车，上车感觉和平时做滴滴差不多呀。。 最后结果很圆满，顺利找回遗失物品】'},
			            ]},
			            {year:'2023',data:[
			              {num:'1. ',day:'2023-01-05',val:'37',note:'流量:⭐️⭐️   痛感:⭐️⭐️   下午5点40'},
										{num:'2. ',day:'2023-03-04',val:'58',note:'流量:⭐️⭐️   痛感:⭐️⭐️   上午10点'},
										{num:'3. ',day:'2023-03-25',val:'21',note:'流量:⭐️⭐️   痛感:⭐️⭐️   上午11点'},
										{num:'4. ',day:'2023-04-29',val:'35',note:'流量:⭐️⭐️   痛感:⭐️⭐️⭐️ 上午9点 第二天 第三条 很痛 心情不好 她老妈说孩子的事情'},
										{num:'5. ',day:'2023-06-22',val:'54',note:'流量:⭐️⭐️   痛感:⭐️⭐️⭐️ 晚上11点'},
										{num:'6. ',day:'2023-08-02',val:'41',note:'流量:⭐️⭐️   痛感:⭐️⭐️⭐️ 早上11点 很痛 第一天晚上很痛 第三天早上也痛'},
										{num:'7. ',day:'2023-09-07',val:'38',note:'流量:⭐️⭐️   痛感:⭐️⭐️⭐️ 下午3点 第三天比较痛'},
										{num:'8. ',day:'2023-10-15',val:'38',note:'流量:⭐️⭐️   痛感:⭐️⭐️⭐️ 中午12点  晚上凌晨很痛'},
										{num:'9. ',day:'2023-12-05',val:'51',note:'流量:⭐️⭐️   痛感:⭐️⭐️    下午3点 不正常 固体留不下来'},
										{num:'10.',day:'2023-12-27',val:'23',note:'流量:⭐️⭐️   痛感:⭐️⭐️   中午来的 不痛'}
			            ]},
			            {year:'2024',data:[
			              {num:'1. ',day:'2024-02-06',val:'41',note:'流量:⭐️⭐️   痛感:⭐️⭐️   中午12点35'},
										{num:'2. ',day:'2024-03-12',val:'35',note:'流量:⭐️⭐️   痛感:⭐️⭐️   下午17点35'},
										{num:'3. ',day:'2024-04-19',val:'38',note:'流量:⭐️⭐️   痛感:⭐️⭐️   下午14点45'}
			            ]}
			          ]
			          var a = $(document);
			          a.ready(function() {
			              var parent = document.getElementById("allul");
			              var divyear= ''
			              var nowyear = new Date().getFullYear();
			              var last3val = 0;
			              var last3all = 0;
			              var lastday

			              let key = []
			              let value = []

			              for(ind in alldata){
			                      if(alldata[ind].year==nowyear){
			                      divyear+='<div style=""><h3 id="'+alldata[ind].year+'"><i class="fa fa-clock-o"></i>&nbsp;'+alldata[ind].year+'</h3>'
			                    }else{
			                      divyear+='<div style="display: none;"><h3 id="'+alldata[ind].year+'"><i class="fa fa-clock-o"></i>&nbsp;'+alldata[ind].year+'</h3>'
			                    }
			                      for(di in alldata[ind].data){
			                        divyear+='<li><span>'+alldata[ind].data[di].num+alldata[ind].data[di].day+' '+alldata[ind].data[di].val+'天</span><p><span>'+alldata[ind].data[di].note+'</span></p></li>'
			                        lastday = alldata[ind].data[di].day
			                        if(nowyear-alldata[ind].year<=3){

			                          last3val+=parseInt(alldata[ind].data[di].val);
			                          last3all+=1
			                        }
			                        if(nowyear-alldata[ind].year<=3){
			                          key.push(alldata[ind].data[di].day)
			                          value.push(parseInt(alldata[ind].data[di].val))
			                        }
			                      }
			                      divyear+='</div>'
			              }
			              parent.innerHTML=divyear;


			              timeElapse(lastday,last3val/last3all);

			             var dom = document.getElementById('container');
			             var myChart = echarts.init(dom, null, {
			               renderer: 'canvas',
			               useDirtyRect: false
			             });
			             var app = {};

			             var option;

			               option = {
			                 grid: {
			                  top: '18%',
			                  left: '10%',
			                  right: '0%',
			                  bottom: '15%',
			                },

			             tooltip: {
			               trigger: 'axis',
			               axisPointer: {
			                 type: 'cross',
			                 crossStyle: {
			                   color: '#999'
			                 }
			               }
			             },
			             toolbox: {
			               feature: {
			                 dataView: { show: true},
			                 magicType: { show: true, type: ['line', 'bar'] },
			                 //restore: { show: true },
			                 saveAsImage: { show: true }
			               }
			             },
			             xAxis: [
			               {
			                 type: 'category',
			                 data: key,
			                 axisPointer: {
			                   type: 'shadow'
			                 }
			               }
			             ],
			             yAxis: [
			               {
			                 type: 'value',
			                 min: 0,
			                 max: 80,
			                 interval: 10,
			                 axisLabel: {
			                   formatter: '{value} 天'
			                 }
			               },

			             ],
			             series: [

			               {
			                 name: '间隔上次',
			                 type: 'line',
			                 tooltip: {
			                   valueFormatter: function (value) {
			                     return value + ' 天';
			                   }
			                 },
			                 showBackground: true,
			                  backgroundStyle: {
			                    color: 'rgba(180, 180, 180, 0.2)'
			                  },
			                  itemStyle: {
			                      color: '#91c7ae'

			                  },
			                 data: value
			               }
			             ]
			           };

			               if (option && typeof option === 'object') {
			                 myChart.setOption(option);
			               }

			               window.addEventListener('resize', myChart.resize);
			          });


			          function timeElapse(lastday,avgday){

			            var nextDay = new Date(lastday);
			            nextDay.setDate(nextDay.getDate() + Math.ceil(avgday));
			            var infoDay = new Date(lastday);
			            infoDay.setDate(infoDay.getDate() + avgday - 7);



			          	var biryear = lastday.split("-")[0]
			          	var birmonth = lastday.split("-")[1]
			          	var birday = lastday.split("-")[2]
			          	var year = new Date();
			          	var getyear = year.getYear();
			          	TMonth = new Array('Jan','Feb','Mar','Apr','May','June','July','Aug','Sep','Oct','Nov','Dec');
			          	nowMonth = birmonth - 1;
			          	bmonth = TMonth[nowMonth];
			          	var today = new Date();
			          	var startday = new Date();

			          	startday = new Date(""+bmonth+" "+birday+", "+biryear+" 00:00 UTC+8");
			          	startday.setYear(""+biryear+"");
			          	today = new Date();
			          	secsPerDay = 1000 ;
			          	minPerDay = 60 * 1000 ;
			          	hoursPerDay = 60 * 60 * 1000;
			          	PerDay = 24 * 60 * 60 * 1000;
			          	secsLeft = (today.getTime() - startday.getTime()) / minPerDay;
			          	secsRound = Math.round(secsLeft);
			          	secsRemain = secsLeft - secsRound;
			          	secsRemain = (secsRemain < 0) ? secsRemain = 60 - ((secsRound - secsLeft) * 60) : secsRemain = (secsLeft - secsRound) * 60;
			          	secsRemain = Math.round(secsRemain);
			          	if(secsRemain<10){
			          		secsRemain = "0"+secsRemain;
			          	}

			          	minLeft = ((today.getTime() - startday.getTime()) / hoursPerDay);
			          	minRound = Math.round(minLeft);
			          	minRemain = minLeft - minRound;
			          	minRemain = (minRemain < 0) ? minRemain = 60 - ((minRound - minLeft) * 60) : minRemain = ((minLeft - minRound) * 60);
			          	minRemain = Math.round(minRemain - 0.495);

			          	if(minRemain<10){
			          		minRemain = "0"+minRemain;
			          	}

			          	hoursLeft = ((today.getTime() - startday.getTime()) / PerDay);
			          	hoursRound = Math.round(hoursLeft);
			          	hoursRemain = hoursLeft - hoursRound;
			          	hoursRemain = (hoursRemain < 0) ? hoursRemain = 24 - ((hoursRound - hoursLeft) * 24)  : hoursRemain = ((hoursLeft - hoursRound) * 24);
			          	hoursRemain = Math.round(hoursRemain - 0.5);

			          	if(hoursRemain<10){
			          		hoursRemain = "0"+hoursRemain;
			          	}

			          	daysLeft = ((today.getTime() - startday.getTime()) / PerDay);
			          	daysLeft = (daysLeft - 0.5);
			          	daysRound = Math.round(daysLeft);

			          	daysRemain = daysRound;

			          	var result = "<span class=\"digit\">"+"距离上一次 <font color=\"#red\">"+lastday+"</font> 已经过去 <font style=\"color: #ff69ed;\">"+ + daysRemain + "</font></span> 天<br/> ";
			            result += "预测下一次开始日 <font style=\"color: #ff69ed;\">"+formatDate(nextDay)+"</font>  " + ",     <font color=\"#red\">"+formatDate(infoDay)+"</font>  开始不要吃冷的 <br/>";
			            result += "（近三年数据预测"+avgday+"天)";
			          	$("#infoc").html(result);

			          }
			          function formatDate(date) {
			            var d = new Date(date),
			              month = '' + (d.getMonth() + 1),
			              day = '' + d.getDate(),
			              year = d.getFullYear();

			            if (month.length < 2) month = '0' + month;
			            if (day.length < 2) day = '0' + day;

			            return [year, month, day].join('-');
			          }
		</script>

	</body>
</html>
